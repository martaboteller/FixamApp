<ion-app>
  <ion-header>
    <ion-toolbar color="tertiary">
      <ion-title>Captures</ion-title>
      <ion-buttons slot="start">
        <ion-menu-button autoHide="false"></ion-menu-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  <ion-tabs>
    <ion-tab-bar slot="bottom">
      <ion-tab-button tab="list">
        <ion-icon name="sunny"></ion-icon>
        <ion-label>List</ion-label>
      </ion-tab-button>
      <ion-tab-button tab="map">
        <ion-icon name="moon"></ion-icon>
        <ion-label>Map</ion-label>
      </ion-tab-button>
    </ion-tab-bar>
  </ion-tabs>

  <ion-content>
    <ion-row style="text-align: right; display: block">
      <ion-col size="10" style="vertical-align: middle">
        <ion-icon name="person-outline"></ion-icon> /
        <ion-icon name="people-outline"></ion-icon
      ></ion-col>
      <ion-col size="1" style="vertical-align: middle">
        <ion-toggle
          color="tertiary"
          [checked]="showAllCaptures"
          (ionChange)="changeDisplayMode($event)"
          disabled="false"
        ></ion-toggle>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col
        sizeLg="4"
        sizeMd="4"
        sizeXs="6"
        *ngFor="let c of listOfCaptures"
        color="primary"
      >
        <ion-card class="favCard">
          <ion-img
            src="{{c.imageUrl}}"
            (click)="goToDetail(c.imageUrl,c.idCapture)"
          ></ion-img>
          <!--overlay in image-->
          <div class="myOverlay">
            <!--show if public or not-->
            <div class="card-public">
              <div *ngIf="c.publicState; else elseBlock">
                <ion-icon name="eye-outline"></ion-icon>
              </div>
              <ng-template #elseBlock
                ><ion-icon name="eye-off-outline"></ion-icon
              ></ng-template>
            </div>
            <!--show author-->
            <div class="card-author">{{getUsername(c.uid)}}</div>
          </div>
          <!--end overlay-->
          <!--Title-->

          <ion-card-title>
            <ion-row>
              <ion-col size="9"> {{c.name}}</ion-col>
              <ion-col size="2"
                ><div *ngIf="c.dislikeChecked; else notCheckedBlock">
                  <ion-img
                    src="/assets/icon/dislike_black.png"
                    (click)="checkDislike(c.idCapture)"
                  ></ion-img>
                </div>
                <ng-template #notCheckedBlock>
                  <ion-img
                    src="/assets/icon/dislike_white.png"
                    (click)="checkDislike(c.idCapture)"
                  ></ion-img
                ></ng-template>
              </ion-col>
            </ion-row>
          </ion-card-title>

          <!--Content-->
          <ion-card-content>
            <ion-item lines="none"
              ><ion-card-subtitle
                >{{c.description.substr(0,55)}}</ion-card-subtitle
              ></ion-item
            >
            <ion-item lines="none">
              <ion-badge slot="end" class="detailBadge" color="dark"
                >{{c.votes}}</ion-badge
              ></ion-item
            >
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-content>
</ion-app>
